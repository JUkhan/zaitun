!function(t){var e;"undefined"!=typeof window?e=window:"undefined"!=typeof self&&(e=self),e.zaitun=function(){return function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n?n:t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){"use strict";function i(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||"symbol"==typeof t||null===t||void 0===t}function o(t,e,n,i){function o(t,e,n){(r[t]||(r[t]={}))[e]=n}for(var r={ns:e},s=0,a=i.length;s<a;s++){var h=i[s];t[h]&&(r[h]=t[h])}for(var c in t)if("key"!==c&&"classNames"!==c&&"selector"!==c){var l=c.indexOf("-");l>0?o(c.slice(0,l),c.slice(l+1),t[c]):r[c]||o(n,c,t[c])}return r}function r(t,e,n,r,s,a){if(s.selector&&(r+=s.selector),s.classNames){var h=s.classNames;r=r+"."+(Array.isArray(h)?h.join("."):h.replace(/\s+/g,"."))}return{sel:r,data:o(s,t,e,n),children:a.map(function(t){return i(t)?{text:t}:t}),key:s.key}}function s(t,e,n,i,o,r){var s;if("function"==typeof i)s=i(o,r);else if(i&&"function"==typeof i.view)s=i.view(o,r);else{if(!i||"function"!=typeof i.render)throw"JSX tag must be either a string, a function or an object with 'view' or 'render' methods";s=i.render(o,r)}return s.key=o.key,s}function a(t,e,n){for(var i=e,o=t.length;i<o;i++){var r=t[i];Array.isArray(r)?a(r,0,n):n.push(r)}}function h(t){if(t)for(var e=0,n=t.length;e<n;e++)if(Array.isArray(t[e])){var i=t.slice(0,e);a(t,e,i),t=i;break}return t}function c(t,e,n,i,o,a){return o=o||{},a=h(a),"string"==typeof i?r(t,e,n,i,o,a):s(t,e,n,i,o,a)}function l(t,e,n){return function(i,o,r){return(arguments.length>3||!Array.isArray(r))&&(r=u.call(arguments,2)),c(t,e||"props",n||f,i,o,r)}}var f=["hook","on","style","class","props","attrs"],u=Array.prototype.slice;e.exports={html:l(void 0),svg:l("http://www.w3.org/2000/svg","attrs"),JSX:l}},{}],2:[function(t,e,n){function i(t,e){if(t.ns="http://www.w3.org/2000/svg",void 0!==e)for(var n=0;n<e.length;++n)i(e[n].data,e[n].children)}var o=t("./vnode"),r=t("./is");e.exports=function(t,e,n){var s,a,h,c={};if(void 0!==n?(c=e,r.array(n)?s=n:r.primitive(n)&&(a=n)):void 0!==e&&(r.array(e)?s=e:r.primitive(e)?a=e:c=e),r.array(s))for(h=0;h<s.length;++h)r.primitive(s[h])&&(s[h]=o(void 0,void 0,void 0,s[h]));return"s"===t[0]&&"v"===t[1]&&"g"===t[2]&&i(c,s),o(t,c,s,a,void 0)}},{"./is":4,"./vnode":10}],3:[function(t,e,n){function i(t){return document.createElement(t)}function o(t,e){return document.createElementNS(t,e)}function r(t){return document.createTextNode(t)}function s(t,e,n){t.insertBefore(e,n)}function a(t,e){t.removeChild(e)}function h(t,e){t.appendChild(e)}function c(t){return t.parentElement}function l(t){return t.nextSibling}function f(t){return t.tagName}function u(t,e){t.textContent=e}e.exports={createElement:i,createElementNS:o,createTextNode:r,appendChild:h,removeChild:a,insertBefore:s,parentNode:c,nextSibling:l,tagName:f,setTextContent:u}},{}],4:[function(t,e,n){e.exports={array:Array.isArray,primitive:function(t){return"string"==typeof t||"number"==typeof t}}},{}],5:[function(t,e,n){function i(t,e){var n,i,o=e.elm,r=t.data.class||{},s=e.data.class||{};for(i in r)s[i]||o.classList.remove(i);for(i in s)(n=s[i])!==r[i]&&o.classList[n?"add":"remove"](i)}e.exports={create:i,update:i}},{}],6:[function(t,e,n){function i(t){return function(){t.length&&(2===t.length?t[0](t[1]):t[0].apply(void 0,t.slice(1)))}}function o(t){return function(e){null!==t.fn&&t.fn(e)}}function r(t,e){var n,r,a,h=e.elm,c=t.data.on||{},l=e.data.on;if(l){for(n in l)if(r=l[n],void 0===(a=c[n]))s.array(r)?h.addEventListener(n,i(r)):(r={fn:r},l[n]=r,h.addEventListener(n,o(r)));else if(s.array(a)){a.length=r.length;for(var f=0;f<a.length;++f)a[f]=r[f];l[n]=a}else a.fn=r,l[n]=a;if(c)for(n in c)if(void 0===l[n]){var a=c[n];s.array(a)?a.length=0:a.fn=null}}}var s=t("../is");e.exports={create:r,update:r}},{"../is":4}],7:[function(t,e,n){function i(t,e){var n,i,o=e.elm,r=t.data.props||{},s=e.data.props||{};for(n in r)s[n]||delete o[n];for(n in s)i=s[n],r[n]===i||"value"===n&&o[n]===i||(o[n]=i)}e.exports={create:i,update:i}},{}],8:[function(t,e,n){function i(t,e,n){h(function(){t[e]=n})}function o(t,e){var n,o,r=e.elm,s=t.data.style||{},a=e.data.style||{},h="delayed"in s;for(o in s)a[o]||(r.style[o]="");for(o in a)if(n=a[o],"delayed"===o)for(o in a.delayed)n=a.delayed[o],h&&n===s.delayed[o]||i(r.style,o,n);else"remove"!==o&&n!==s[o]&&(r.style[o]=n)}function r(t){var e,n,i=t.elm,o=t.data.style;if(o&&(e=o.destroy))for(n in e)i.style[n]=e[n]}function s(t,e){var n=t.data.style;if(!n||!n.remove)return void e();var i,o,r=t.elm,s=0,a=n.remove,h=0,c=[];for(i in a)c.push(i),r.style[i]=a[i];o=getComputedStyle(r);for(var l=o["transition-property"].split(", ");s<l.length;++s)c.indexOf(l[s])!==-1&&h++;r.addEventListener("transitionend",function(t){t.target===r&&--h,0===h&&e()})}var a="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,h=function(t){a(function(){a(t)})};e.exports={create:o,update:o,destroy:r,remove:s}},{}],9:[function(t,e,n){"use strict";function i(t){return void 0===t}function o(t){return void 0!==t}function r(t,e){return t.key===e.key&&t.sel===e.sel}function s(t,e,n){var i,r,s={};for(i=e;i<=n;++i)r=t[i].key,o(r)&&(s[r]=i);return s}function a(t,e){function n(t){return h(e.tagName(t).toLowerCase(),{},[],void 0,t)}function a(t,n){return function(){if(0==--n){var i=e.parentNode(t);e.removeChild(i,t)}}}function d(t,n){var i,r=t.data;o(r)&&o(i=r.hook)&&o(i=i.init)&&(i(t),r=t.data);var s,a=t.children,h=t.sel;if(o(h)){var l=h.indexOf("#"),u=h.indexOf(".",l),m=l>0?l:h.length,p=u>0?u:h.length,v=l!==-1||u!==-1?h.slice(0,Math.min(m,p)):h;if(s=t.elm=o(r)&&o(i=r.ns)?e.createElementNS(i,v):e.createElement(v),m<p&&(s.id=h.slice(m+1,p)),u>0&&(s.className=h.slice(p+1).replace(/\./g," ")),c.array(a))for(i=0;i<a.length;++i)e.appendChild(s,d(a[i],n));else c.primitive(t.text)&&e.appendChild(s,e.createTextNode(t.text));for(i=0;i<C.create.length;++i)C.create[i](f,t);i=t.data.hook,o(i)&&(i.create&&i.create(f,t),i.insert&&n.push(t))}else s=t.elm=e.createTextNode(t.text);return t.elm}function m(t,n,i,o,r,s){for(;o<=r;++o)e.insertBefore(t,d(i[o],s),n)}function p(t){var e,n,i=t.data;if(o(i)){for(o(e=i.hook)&&o(e=e.destroy)&&e(t),e=0;e<C.destroy.length;++e)C.destroy[e](t);if(o(e=t.children))for(n=0;n<t.children.length;++n)p(t.children[n])}}function v(t,n,i,r){for(;i<=r;++i){var s,h,c,l=n[i];if(o(l))if(o(l.sel)){for(p(l),h=C.remove.length+1,c=a(l.elm,h),s=0;s<C.remove.length;++s)C.remove[s](l,c);o(s=l.data)&&o(s=s.hook)&&o(s=s.remove)?s(l,c):c()}else e.removeChild(t,l.elm)}}function y(t,n,o,a){for(var h,c,l,f,u=0,p=0,y=n.length-1,b=n[0],w=n[y],C=o.length-1,x=o[0],k=o[C];u<=y&&p<=C;)i(b)?b=n[++u]:i(w)?w=n[--y]:r(b,x)?(g(b,x,a),b=n[++u],x=o[++p]):r(w,k)?(g(w,k,a),w=n[--y],k=o[--C]):r(b,k)?(g(b,k,a),e.insertBefore(t,b.elm,e.nextSibling(w.elm)),b=n[++u],k=o[--C]):r(w,x)?(g(w,x,a),e.insertBefore(t,w.elm,b.elm),w=n[--y],x=o[++p]):(i(h)&&(h=s(n,u,y)),c=h[x.key],i(c)?(e.insertBefore(t,d(x,a),b.elm),x=o[++p]):(l=n[c],g(l,x,a),n[c]=void 0,e.insertBefore(t,l.elm,b.elm),x=o[++p]));u>y?(f=i(o[C+1])?null:o[C+1].elm,m(t,f,o,p,C,a)):p>C&&v(t,n,u,y)}function g(t,n,s){var a,h;o(a=n.data)&&o(h=a.hook)&&o(a=h.prepatch)&&a(t,n);var c=n.elm=t.elm,l=t.children,f=n.children;if(t!==n){if(!r(t,n)){var u=e.parentNode(t.elm);return c=d(n,s),e.insertBefore(u,c,t.elm),void v(u,[t],0,0)}if(o(n.data)){for(a=0;a<C.update.length;++a)C.update[a](t,n);a=n.data.hook,o(a)&&o(a=a.update)&&a(t,n)}i(n.text)?o(l)&&o(f)?l!==f&&y(c,l,f,s):o(f)?(o(t.text)&&e.setTextContent(c,""),m(c,null,f,0,f.length-1,s)):o(l)?v(c,l,0,l.length-1):o(t.text)&&e.setTextContent(c,""):t.text!==n.text&&e.setTextContent(c,n.text),o(h)&&o(a=h.postpatch)&&a(t,n)}}var b,w,C={};for(i(e)&&(e=l),b=0;b<u.length;++b)for(C[u[b]]=[],w=0;w<t.length;++w)void 0!==t[w][u[b]]&&C[u[b]].push(t[w][u[b]]);return function(t,o){var s,a,h,c=[];for(s=0;s<C.pre.length;++s)C.pre[s]();for(i(t.sel)&&(t=n(t)),r(t,o)?g(t,o,c):(a=t.elm,h=e.parentNode(a),d(o,c),null!==h&&(e.insertBefore(h,o.elm,e.nextSibling(a)),v(h,[t],0,0))),s=0;s<c.length;++s)c[s].data.hook.insert(c[s]);for(s=0;s<C.post.length;++s)C.post[s]();return o}}var h=t("./vnode"),c=t("./is"),l=t("./htmldomapi"),f=h("",{},[],void 0,void 0),u=["create","update","remove","destroy","pre","post"];e.exports={init:a}},{"./htmldomapi":3,"./is":4,"./vnode":10}],10:[function(t,e,n){e.exports=function(t,e,n,i,o){return{sel:t,data:e,children:n,text:i,elm:o,key:void 0===e?void 0:e.key}}},{}],11:[function(t,e,n){function i(t){if(!t.containerDom)throw new Error("mountNode must be a css selector or a dom object");if(h="string"==typeof t.containerDom?document.querySelector(t.containerDom):t.containerDom,"object"!=typeof t.mainComponent&&"function"!=typeof t.mainComponent)throw new Error("bootstrap options: mainComponent missing.");s.config(t).attach(r).listen().setActivePath(t.activePath)}function o(){return{init:function(){return{}},view:function(t){return l("div.com-load","loading...")}}}function r(){this.mcom={},this.child=o(),this.model={},this.params=null,this.devTool=null,this.key="",this.cacheObj={},this.initMainComponent=function(t){"object"==typeof t?this.mcom=t:"function"==typeof t&&(this.mcom=new t),this.validateCom(this.mcom)},this.validateCom=function(t){if("function"!=typeof t.init&&(t.init=function(){return{}}),"function"!=typeof t.view)throw new Error("Component must have a view function.")},this.initChildComponent=function(t){"object"==typeof t?this.child=t:this.key&&this.cacheObj[this.key]?this.child=this.getComponentFromCache(this.key).instance:"function"==typeof t&&(this.child=new t),this.validateCom(this.child)},this.reset=function(){this.model=this.mcom.init(this.dispatch,this.params),"function"==typeof this.child.init&&(this.model.child=this.child.init(this.dispatch,this.params)),this.updateUI()},this.updateByModel=function(t){this.model=t,this.updateUI()},this.loadCom=function(t,e,n){var i=this;t.loadComponent().then(function(o){t.component=o.default,t.loadComponent=void 0,i.runChild(t,e,n)})},this.runChild=function(t,e,n){"function"==typeof t.loadComponent?(this.child=o(),this.updateUI(),this.loadCom(t,e,n)):(this.params=e,this.key=t.cache?n:"",this.initChildComponent(t.component),this.model.child=this.key&&this.cacheObj[this.key]?this.getComponentFromCache(this.key).state:this.child.init(this.dispatch,e),this.updateUI(),"function"==typeof this.child.onViewInit&&this.child.onViewInit(this.model,this.dispatch),this.devTool&&this.devTool.reset())},this.run=function(t){this.initMainComponent(t),this.model=this.mcom.init(this.dispatch),this.updateUI()},this.updateUI=function(){h=c(h,this.mcom.view({model:this.model,dispatch:this.dispatch.bind(this)}))},this.dispatch=function(t){this.model=this.mcom.update(this.model,t),this.updateUI(),this.devTool&&this.devTool.setAction(t,this.model)},this.fireDestroyEvent=function(){this.key&&this.setComponentToCache(this.key,this.child,this.model.child),"function"==typeof this.child.onDestroy&&this.child.onDestroy()},this.destroy=function(t){try{if(this.child&&"function"==typeof this.child.canDeactivate){var e=this.child.canDeactivate();if("object"==typeof e&&e.then){var n=this;e.then(function(e){e&&(window.location.href=t,n.fireDestroyEvent())})}else e&&(window.location.href=t,this.fireDestroyEvent())}else window.location.href=t,this.fireDestroyEvent()}catch(t){console.log(t)}},this.getComponentFromCache=function(t){return this.cacheObj[t]||{}},this.setComponentToCache=function(t,e,n){this.cacheObj[t]={instance:e,state:n}}}var s=t("./router"),a=t("snabbdom"),h=null,c=a.init([t("snabbdom/modules/class"),t("snabbdom/modules/props"),t("snabbdom/modules/style"),t("snabbdom/modules/eventlisteners")]),l=t("snabbdom/h");e.exports=i},{"./router":13,snabbdom:9,"snabbdom/h":2,"snabbdom/modules/class":5,"snabbdom/modules/eventlisteners":6,"snabbdom/modules/props":7,"snabbdom/modules/style":8}],12:[function(t,e,n){var i=t("snabbdom/h"),o=t("snabbdom-jsx"),r=t("./core"),s=t("./router");e.exports={h:i,html:o.html,svg:o.svg,bootstrap:r,Router:s}},{"./core":11,"./router":13,"snabbdom-jsx":1,"snabbdom/h":2}],13:[function(t,e,n){var i={routes:[],locationStrategy:"hash",baseUrl:"/",CM:null,mainComponent:null,config:function(t){return this.locationStrategy="history"==t.locationStrategy&&history.pushState?"history":"hash",this.baseUrl=t.baseUrl?"/"+this.clearSlashes(t.baseUrl)+"/":"/",this.mainComponent=t.mainComponent,this.routes=t.routes||[],this.devTool=t.devTool,this},getFragment:function(){var t="";if("history"===this.locationStrategy)t=this.clearSlashes(decodeURI(location.pathname+location.search)),t=t.replace(/\?(.*)$/,""),t="/"!=this.baseUrl?t.replace(this.baseUrl,""):t;else{var e=window.location.href.match(/#(.*)$/);t=e?e[1]:""}return this.clearSlashes(t)},clearSlashes:function(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")},attach:function(t){return this.CM=new t,this.CM.run(this.mainComponent),this.devTool&&(new this.devTool).setCM(this.CM),this},add:function(t){return this.routes.push(t),this},remove:function(t){return this.routes=this.routes.filter(function(e){return e.path!==t}),this},check:function(t){for(var e,n,i,o=0,r=this.routes.length;o<r;o++){if(this.clearSlashes(this.routes[o].path)===t)return this.render(this.routes[o],null,t),this;if((e=this.routes[o].path.match(/:([^\/]+)/g))&&(i={},n=t.match(new RegExp(this.clearSlashes(this.routes[o].path).replace(/:([^\/]+)/g,"([^/]*)")))))return n.shift(),n.forEach(function(t,n){i[e[n].replace(":","")]=t}),this.render(this.routes[o],i,t),this}return this},listen:function(){var t=this;return window.addEventListener("hashchange",function(e){t.check(t.getFragment())},!1),Array.from(document.querySelectorAll("a")).forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),t.clearSlashes(e.target.href)!==t.clearSlashes(window.location.href)&&(e.target.href.indexOf("#")&&window.location.href.indexOf("#")===-1&&window.location.href.replace(/#(.*)$/,"")+"#"+t._fap===e.target.href||t.CM.destroy(e.target.href))},!1)}),this},navigate:function(t){return t=t?t:"","history"===this.locationStrategy?history.pushState(null,null,this.baseUrl+this.clearSlashes(t)):this.CM.destroy(window.location.href.replace(/#(.*)$/,"")+"#"+t),this},_fap:"",setActivePath:function(t){t&&(this._fap||(this._fap="/"===t[0]?t:"/"+t),this.check(this.clearSlashes(this.getFragment()||t)))},render:function(t,e,n){window.activePath=t.path,this.CM.runChild(t,e,n)}};e.exports=i},{}]},{},[12])(12)}()}();