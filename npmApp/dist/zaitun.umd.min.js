!function(e){var t;"undefined"!=typeof window?t=window:"undefined"!=typeof self&&(t=self),t.zaitun=function(){return function e(t,n,o){function r(a,c){if(!n[a]){if(!t[a]){var f="function"==typeof require&&require;if(!c&&f)return f(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){"use strict";function o(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||null===e||void 0===e}function r(e,t,n,o){function r(e,t,n){(i[e]||(i[e]={}))[t]=n}for(var i={ns:t},a=0,c=o.length;a<c;a++){var f=o[a];e[f]&&(i[f]=e[f])}for(var s in e)if("key"!==s&&"classNames"!==s&&"selector"!==s){var u=s.indexOf("-");u>0?r(s.slice(0,u),s.slice(u+1),e[s]):i[s]||r(n,s,e[s])}return i}function i(e,t,n,i,a,c){if(a.selector&&(i+=a.selector),a.classNames){var f=a.classNames;i=i+"."+(Array.isArray(f)?f.join("."):f.replace(/\s+/g,"."))}return{sel:i,data:r(a,e,t,n),children:c.map(function(e){return o(e)?{text:e}:e}),key:a.key}}function a(e,t,n,o,r,i){var a;if("function"==typeof o)a=o(r,i);else if(o&&"function"==typeof o.view)a=o.view(r,i);else{if(!o||"function"!=typeof o.render)throw"JSX tag must be either a string, a function or an object with 'view' or 'render' methods";a=o.render(r,i)}return a.key=r.key,a}function c(e,t,n){for(var o=t,r=e.length;o<r;o++){var i=e[o];Array.isArray(i)?c(i,0,n):n.push(i)}}function f(e){if(e)for(var t=0,n=e.length;t<n;t++)if(Array.isArray(e[t])){var o=e.slice(0,t);c(e,t,o),e=o;break}return e}function s(e,t,n,o,r,c){return r=r||{},c=f(c),"string"==typeof o?i(e,t,n,o,r,c):a(e,t,n,o,r,c)}function u(e,t,n){return function(o,r,i){return(arguments.length>3||!Array.isArray(i))&&(i=d.call(arguments,2)),s(e,t||"props",n||l,o,r,i)}}var l=["hook","on","style","class","props","attrs"],d=Array.prototype.slice;t.exports={html:u(void 0),svg:u("http://www.w3.org/2000/svg","attrs"),JSX:u}},{}],2:[function(e,t,n){function o(e,t){if(e.ns="http://www.w3.org/2000/svg",void 0!==t)for(var n=0;n<t.length;++n)o(t[n].data,t[n].children)}var r=e("./vnode"),i=e("./is");t.exports=function(e,t,n){var a,c,f,s={};if(void 0!==n?(s=t,i.array(n)?a=n:i.primitive(n)&&(c=n)):void 0!==t&&(i.array(t)?a=t:i.primitive(t)?c=t:s=t),i.array(a))for(f=0;f<a.length;++f)i.primitive(a[f])&&(a[f]=r(void 0,void 0,void 0,a[f]));return"s"===e[0]&&"v"===e[1]&&"g"===e[2]&&o(s,a),r(e,s,a,c,void 0)}},{"./is":4,"./vnode":10}],3:[function(e,t,n){function o(e){return document.createElement(e)}function r(e,t){return document.createElementNS(e,t)}function i(e){return document.createTextNode(e)}function a(e,t,n){e.insertBefore(t,n)}function c(e,t){e.removeChild(t)}function f(e,t){e.appendChild(t)}function s(e){return e.parentElement}function u(e){return e.nextSibling}function l(e){return e.tagName}function d(e,t){e.textContent=t}t.exports={createElement:o,createElementNS:r,createTextNode:i,appendChild:f,removeChild:c,insertBefore:a,parentNode:s,nextSibling:u,tagName:l,setTextContent:d}},{}],4:[function(e,t,n){t.exports={array:Array.isArray,primitive:function(e){return"string"==typeof e||"number"==typeof e}}},{}],5:[function(e,t,n){function o(e,t){var n,o,r=t.elm,i=e.data.class||{},a=t.data.class||{};for(o in i)a[o]||r.classList.remove(o);for(o in a)(n=a[o])!==i[o]&&r.classList[n?"add":"remove"](o)}t.exports={create:o,update:o}},{}],6:[function(e,t,n){function o(e){return function(){e.length&&(2===e.length?e[0](e[1]):e[0].apply(void 0,e.slice(1)))}}function r(e){return function(t){null!==e.fn&&e.fn(t)}}function i(e,t){var n,i,c,f=t.elm,s=e.data.on||{},u=t.data.on;if(u){for(n in u)if(i=u[n],void 0===(c=s[n]))a.array(i)?f.addEventListener(n,o(i)):(i={fn:i},u[n]=i,f.addEventListener(n,r(i)));else if(a.array(c)){c.length=i.length;for(var l=0;l<c.length;++l)c[l]=i[l];u[n]=c}else c.fn=i,u[n]=c;if(s)for(n in s)if(void 0===u[n]){var c=s[n];a.array(c)?c.length=0:c.fn=null}}}var a=e("../is");t.exports={create:i,update:i}},{"../is":4}],7:[function(e,t,n){function o(e,t){var n,o,r=t.elm,i=e.data.props||{},a=t.data.props||{};for(n in i)a[n]||delete r[n];for(n in a)o=a[n],i[n]===o||"value"===n&&r[n]===o||(r[n]=o)}t.exports={create:o,update:o}},{}],8:[function(e,t,n){function o(e,t,n){f(function(){e[t]=n})}function r(e,t){var n,r,i=t.elm,a=e.data.style||{},c=t.data.style||{},f="delayed"in a;for(r in a)c[r]||(i.style[r]="");for(r in c)if(n=c[r],"delayed"===r)for(r in c.delayed)n=c.delayed[r],f&&n===a.delayed[r]||o(i.style,r,n);else"remove"!==r&&n!==a[r]&&(i.style[r]=n)}function i(e){var t,n,o=e.elm,r=e.data.style;if(r&&(t=r.destroy))for(n in t)o.style[n]=t[n]}function a(e,t){var n=e.data.style;if(!n||!n.remove)return void t();var o,r,i=e.elm,a=0,c=n.remove,f=0,s=[];for(o in c)s.push(o),i.style[o]=c[o];r=getComputedStyle(i);for(var u=r["transition-property"].split(", ");a<u.length;++a)s.indexOf(u[a])!==-1&&f++;i.addEventListener("transitionend",function(e){e.target===i&&--f,0===f&&t()})}var c="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,f=function(e){c(function(){c(e)})};t.exports={create:r,update:r,destroy:i,remove:a}},{}],9:[function(e,t,n){"use strict";function o(e){return void 0===e}function r(e){return void 0!==e}function i(e,t){return e.key===t.key&&e.sel===t.sel}function a(e,t,n){var o,i,a={};for(o=t;o<=n;++o)i=e[o].key,r(i)&&(a[i]=o);return a}function c(e,t){function n(e){return f(t.tagName(e).toLowerCase(),{},[],void 0,e)}function c(e,n){return function(){if(0==--n){var o=t.parentNode(e);t.removeChild(o,e)}}}function h(e,n){var o,i=e.data;r(i)&&r(o=i.hook)&&r(o=o.init)&&(o(e),i=e.data);var a,c=e.children,f=e.sel;if(r(f)){var u=f.indexOf("#"),d=f.indexOf(".",u),p=u>0?u:f.length,v=d>0?d:f.length,m=u!==-1||d!==-1?f.slice(0,Math.min(p,v)):f;if(a=e.elm=r(i)&&r(o=i.ns)?t.createElementNS(o,m):t.createElement(m),p<v&&(a.id=f.slice(p+1,v)),d>0&&(a.className=f.slice(v+1).replace(/\./g," ")),s.array(c))for(o=0;o<c.length;++o)t.appendChild(a,h(c[o],n));else s.primitive(e.text)&&t.appendChild(a,t.createTextNode(e.text));for(o=0;o<w.create.length;++o)w.create[o](l,e);o=e.data.hook,r(o)&&(o.create&&o.create(l,e),o.insert&&n.push(e))}else a=e.elm=t.createTextNode(e.text);return e.elm}function p(e,n,o,r,i,a){for(;r<=i;++r)t.insertBefore(e,h(o[r],a),n)}function v(e){var t,n,o=e.data;if(r(o)){for(r(t=o.hook)&&r(t=t.destroy)&&t(e),t=0;t<w.destroy.length;++t)w.destroy[t](e);if(r(t=e.children))for(n=0;n<e.children.length;++n)v(e.children[n])}}function m(e,n,o,i){for(;o<=i;++o){var a,f,s,u=n[o];if(r(u))if(r(u.sel)){for(v(u),f=w.remove.length+1,s=c(u.elm,f),a=0;a<w.remove.length;++a)w.remove[a](u,s);r(a=u.data)&&r(a=a.hook)&&r(a=a.remove)?a(u,s):s()}else t.removeChild(e,u.elm)}}function y(e,n,r,c){for(var f,s,u,l,d=0,v=0,y=n.length-1,b=n[0],x=n[y],w=r.length-1,C=r[0],S=r[w];d<=y&&v<=w;)o(b)?b=n[++d]:o(x)?x=n[--y]:i(b,C)?(g(b,C,c),b=n[++d],C=r[++v]):i(x,S)?(g(x,S,c),x=n[--y],S=r[--w]):i(b,S)?(g(b,S,c),t.insertBefore(e,b.elm,t.nextSibling(x.elm)),b=n[++d],S=r[--w]):i(x,C)?(g(x,C,c),t.insertBefore(e,x.elm,b.elm),x=n[--y],C=r[++v]):(o(f)&&(f=a(n,d,y)),s=f[C.key],o(s)?(t.insertBefore(e,h(C,c),b.elm),C=r[++v]):(u=n[s],g(u,C,c),n[s]=void 0,t.insertBefore(e,u.elm,b.elm),C=r[++v]));d>y?(l=o(r[w+1])?null:r[w+1].elm,p(e,l,r,v,w,c)):v>w&&m(e,n,d,y)}function g(e,n,a){var c,f;r(c=n.data)&&r(f=c.hook)&&r(c=f.prepatch)&&c(e,n);var s=n.elm=e.elm,u=e.children,l=n.children;if(e!==n){if(!i(e,n)){var d=t.parentNode(e.elm);return s=h(n,a),t.insertBefore(d,s,e.elm),void m(d,[e],0,0)}if(r(n.data)){for(c=0;c<w.update.length;++c)w.update[c](e,n);c=n.data.hook,r(c)&&r(c=c.update)&&c(e,n)}o(n.text)?r(u)&&r(l)?u!==l&&y(s,u,l,a):r(l)?(r(e.text)&&t.setTextContent(s,""),p(s,null,l,0,l.length-1,a)):r(u)?m(s,u,0,u.length-1):r(e.text)&&t.setTextContent(s,""):e.text!==n.text&&t.setTextContent(s,n.text),r(f)&&r(c=f.postpatch)&&c(e,n)}}var b,x,w={};for(o(t)&&(t=u),b=0;b<d.length;++b)for(w[d[b]]=[],x=0;x<e.length;++x)void 0!==e[x][d[b]]&&w[d[b]].push(e[x][d[b]]);return function(e,r){var a,c,f,s=[];for(a=0;a<w.pre.length;++a)w.pre[a]();for(o(e.sel)&&(e=n(e)),i(e,r)?g(e,r,s):(c=e.elm,f=t.parentNode(c),h(r,s),null!==f&&(t.insertBefore(f,r.elm,t.nextSibling(c)),m(f,[e],0,0))),a=0;a<s.length;++a)s[a].data.hook.insert(s[a]);for(a=0;a<w.post.length;++a)w.post[a]();return r}}var f=e("./vnode"),s=e("./is"),u=e("./htmldomapi"),l=f("",{},[],void 0,void 0),d=["create","update","remove","destroy","pre","post"];t.exports={init:c}},{"./htmldomapi":3,"./is":4,"./vnode":10}],10:[function(e,t,n){t.exports=function(e,t,n,o,r){return{sel:e,data:t,children:n,text:o,elm:r,key:void 0===t?void 0:t.key}}},{}],11:[function(e,t,n){function o(e){if(!e.containerDom)throw new Error("mountNode must be a css selector or a dom object");if(f="string"==typeof e.containerDom?document.querySelector(e.containerDom):e.containerDom,"object"!=typeof e.mainComponent&&"function"!=typeof e.mainComponent)throw new Error("bootstrap options: mainComponent missing.");e.cm=i,a.config(e),s=e.cacheStrategy}function r(){return{init:function(){return{}},view:function(e){return l("div.com-load","loading...")}}}function i(){function e(e){"object"==typeof e?m=e:"function"==typeof e&&(m=new e),t(m)}function t(e){if("function"!=typeof e.init&&(e.init=function(){return{}}),"function"!=typeof e.view)throw new Error("Component must have a view function.")}function n(e){"object"==typeof e?C.child=e:"function"==typeof e&&(C.child=new e),t(C.child)}function o(e,t,n){e.loadComponent().then(function(o){e.component=o.default,e.loadComponent=void 0,C.runChild(e,t,n)})}function i(){f=u(f,m.view({model:y,dispatch:c}))}function c(e){y=m.update(y,e),i(),C.devTool&&C.devTool.setAction(e,y),w.cache&&w.cacheUpdate_perStateChange&&h(b,C.child,y.child)}function l(e,t){var n=setTimeout(function(){t(e),clearTimeout(n)},0);b&&h(b,C.child,y.child),"function"==typeof C.child.onDestroy&&C.child.onDestroy()}function d(e){var t=e?p():{},n=!(!e||!t[e]),o=[n];return n&&o.push(t[e]),o}function h(e,t,n){var o=p();o[e]={state:n},"session"===v()?sessionStorage.setItem("app_cache",C.json_stringify(o)):"local"===v()?localStorage.setItem("app_cache",C.json_stringify(o)):x=o}function p(){return"session"===v()?C.json_parse(sessionStorage.getItem("app_cache")||"{}"):"local"===v()?C.json_parse(localStorage.getItem("app_cache")||"{}"):x}function v(){return w.cacheStrategy?w.cacheStrategy:s}var m={},y={},g=null,b="",x={},w=null,C=this;this.devTool=null,this.child=r(),this.updateCache=function(){b&&h(b,C.child,y.child)},this.json_parse=function(e){return JSON.parse(e)},this.json_stringify=function(e){return JSON.stringify(e)},this.reset=function(){y=m.init(c,g),"function"==typeof this.child.init&&(y.child=this.child.init(c,g)),i()},this.updateByModel=function(e){y=e,i()},this.runChild=function(e,t,a){if("function"==typeof e.loadComponent)this.child=r(),i(),o(e,t,a);else{w=e,g=t,b=e.cache?a:"",n(e.component);var f=d(b);y.child=f[0]?f[1].state:this.child.init(c,t),i(),"function"==typeof this.child.afterViewRender&&this.child.afterViewRender(y,c),this.devTool&&this.devTool.reset()}},this.run=function(t){e(t),y=m.init(c),i(),"function"==typeof m.afterViewRender&&m.afterViewRender(y,c)},this.canActive=function(e,t){try{if("function"==typeof e.canActivate){var n=new e.canActivate;if("function"==typeof n.canActivate){var o=n.canActivate(a);"object"==typeof o&&o.then?o.then(function(e){t(e)}):t(o)}else t(!0)}else t(!0)}catch(e){t(!1)}},this.destroy=function(e,t){try{if(this.child&&"function"==typeof w.canDeactivate){var n=new w.canDeactivate;if("function"==typeof n.canDeactivate){var o=n.canDeactivate(this.child,a);"object"==typeof o&&o.then?o.then(function(n){n&&l(e,t)}):o&&l(e,t)}else l(e,t)}else l(e,t)}catch(e){console.log(e)}}}var a=e("./router"),c=e("snabbdom"),f=null,s="default",u=c.init([e("snabbdom/modules/class"),e("snabbdom/modules/props"),e("snabbdom/modules/style"),e("snabbdom/modules/eventlisteners")]),l=e("snabbdom/h");t.exports=o},{"./router":13,snabbdom:9,"snabbdom/h":2,"snabbdom/modules/class":5,"snabbdom/modules/eventlisteners":6,"snabbdom/modules/props":7,"snabbdom/modules/style":8}],12:[function(e,t,n){var o=e("snabbdom/h"),r=e("snabbdom-jsx"),i=e("./core"),a=e("./router");t.exports={h:o,html:r.html,svg:r.svg,bootstrap:i,Router:a,jsx:r}},{"./core":11,"./router":13,"snabbdom-jsx":1,"snabbdom/h":2}],13:[function(e,t,n){var o=function(e){function t(e){return e.toString().replace(/\/$/,"").replace(/^\//,"")}function n(e){m=new e,x.CM=m,m.run(b),l&&(new l).setCM(m)}function o(){var n="";if("history"===h)n=e.location.href.replace(v+p,"");else{var o=e.location.href.match(/#(.*)$/);n=o?o[1]:""}return!n&&y.activePath&&(n=y.activePath),t(n)}function r(){var n=!1;e.addEventListener("popstate",function(e){n=!0,c(o())},!1),e.addEventListener("hashchange",function(e){n||c(o()),n=!1},!1),Array.from(document.querySelectorAll("a")).forEach(function(n){n.addEventListener("click",function(o){o.preventDefault(),t(n.href)!==t(e.location.href)&&(n.href.indexOf("#")&&e.location.href.indexOf("#")===-1&&e.location.href.replace(/#(.*)$/,"")+"#"+g===n.href||i(n.href,a(n.href)))},!1)})}function i(n,o){m.canActive(o,function(r){r&&(o._ca_checked=!0,m.destroy(n,function(n){"hash"===h?e.location.href=n:(n=n.replace(v+p,""),history.pushState({x:1},null,p+t(n)),c(n))}))})}function a(e){var n;e.indexOf("#")!==-1?(n=e.match(/#(.*)$/),e=n?n[1]:""):"history"===h&&(e=e.replace(v+p,"")),e=t(e);for(var o=0,r=d.length;o<r;o++){if(t(d[o].path)===e)return d[o];if(d[o].path.match(/:([^\/]+)/g)&&(n=e.match(new RegExp(t(d[o].path).replace(/:([^\/]+)/g,"([^/]*)")))))return d[o]}return null}function c(e){for(var n,o,r,i=0,a=d.length;i<a;i++){if(t(d[i].path)===e)return void s(d[i],null,e);if((n=d[i].path.match(/:([^\/]+)/g))&&(r={},o=e.match(new RegExp(t(d[i].path).replace(/:([^\/]+)/g,"([^/]*)")))))return o.shift(),o.forEach(function(e,t){r[n[t].replace(":","")]=e}),void s(d[i],r,e)}}function f(e){e&&(g||(g="/"===e[0]?e:"/"+e),c(t(o()||e)))}function s(e,t,n){e._ca_checked?u(e,t,n):m.canActive(e,function(o){o&&u(e,t,n)})}function u(e,t,n){e._ca_checked=!1,e.routeParams=t,e.navPath=n,x.activeRoute={routeParams:t,path:e.path,navPath:n,data:e.data||{}},m.runChild(e,t,n)}var l,d=[],h="hash",p="/",v=e.location.origin,m=null,y={},g="",b=null,x={activeRoute:{}};return x.config=function(e){return y=e,h="history"==y.locationStrategy&&history.pushState?"history":"hash",p=y.baseUrl?"/"+t(y.baseUrl)+"/":"/",b=y.mainComponent,d=y.routes||[],l=y.devTool,n(y.cm),r(),f(y.activePath),this},x.add=function(e){d.push(e)},x.remove=function(e){this.routes=this.routes.filter(function(t){return t.path!==e})},x.navigate=function(n){var o=setTimeout(function(){n=n?n:"","history"===h?(history.pushState(null,null,p+t(n)),i(p+t(n),a(n))):i(e.location.href.replace(/#(.*)$/,"")+"#"+n,a(n)),clearTimeout(o)},0)},x}(window);t.exports=o},{}]},{},[12])(12)}()}();